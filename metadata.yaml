name: alertmanager-k8s
display-name: Alertmanager

summary: |
  Kubernetes charm for Alertmanager.

description: |
  Alertmanager handles alerts sent by client applications such as the Prometheus server.
  It takes care of deduplicating, grouping, and routing them to the correct receiver integrations
  such as email, PagerDuty, or OpsGenie. It also takes care of silencing and inhibition of alerts.

tags:
  - observability
  - lma
  - alertmanager
  - prometheus
  - monitoring

# workload containers
containers:
  alertmanager:  # container key used by pebble
    resource: alertmanager-image
    mounts:
      - storage: data
        location: /alertmanager

# oci-image resources for each container defined above
resources:
  alertmanager-image:
    type: oci-image
    description: OCI image for alertmanager

provides:
  alerting:
    interface: alertmanager_dispatch
    # assumed network type: private

requires:
  karma-dashboard:
    interface: karma_dashboard

peers:
  replicas:
    interface: alertmanager_replica
    # assumed network type: private

storage:
  data:
    type: filesystem
    description: >
      Storage path passed to alertmanager via --storage.path argument and used for nflog and silences snapshot
    # No need to specify a custom location in the charm container
    # (workload location is specified under "containers" section)
    # When unspecified, would be /var/lib/juju/storage/data/0
    # location: /alertmanager

